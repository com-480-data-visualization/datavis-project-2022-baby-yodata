<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Star Wars</title>
	<meta name="description" content="Welcome to Data Visualization">
	<meta name="author" content="K Lis">

	<link rel="stylesheet" href="./style.css">

</head>

<body>
	<main>
		<canvas id="canvas" class="stretch"></canvas>
		<div class="stretch container">
			<div id="title" class="child">
				<h1 class="title center">
					Star Wars
				</h1>
				<h2 class="subtitle center">
					scroll down to enter the universe
				</h2>
			</div>
			<div id="crawl-container" class="center child">
				<div id="crawl">
					<div id="crawl-content">
						<div>
							<h1>
								Episode I
							</h1>
							<h2>
								Introduction
							</h2>
							<p>
								Welcome to the wonderful world of Star Wars !
							</p>
							<p>
								You don't know this saga, or you want to learn more? This website is made
								for you. You can find on the website interesting and surprising information
								on the whole universe.
							</p>
							<p>
								Keep scrolling to start the adventure...
							</p>
							<p>

							</p>
						</div>
					</div>
				</div>
			</div>

			<div id="title" class="child">
				<div>
					<h3>
						Let's start by introducing you to what Star Wars is. It is a science fiction universe created
						by American director, screenwriter and producer George Lucas. A first film trilogy was released
						between 1977 and 1983. The universe then grows with three new films between 1999 and 2005 which
						recount events prior to the first trilogy. The first trilogy and the prelogy enjoyed immense
						commercial success and generally positive critical reception.
						The Star Wars copyrights were bought in 2012 by the Walt Disney Company for $4.05 billion.
						The seventh episode of the saga and first of the third trilogy (episodes VII, VIII and IX) was
						released in cinemas in 2015.
						Disney and the production company Lucasfilm inaugurate in 2016 a series of derivative films
						grouped under the acronym A Star Wars Story, with the release of Rogue One whose events are
						located just before episode IV.
					</h3>

					<h3>
						The story of Star Wars, takes place in a galaxy which is the scene of clashes between the Jedi
						Knights and the Sith Lords. Antagonistic people sensitive to the Force, a mysterious energy
						field granting them psychic powers. The Jedi harness the Light Side of the Force, a benevolent
						and defensive power, to maintain peace in the galaxy. The Sith use the Dark Side, a harmful and
						destructive power, for their own purposes and to dominate the galaxy.
					</h3>

				</div>
			</div>

			<div id="title" class="child">
				<div>
					<h3>
						The universe is very rich, and the story is huge. There are many planets in the galaxy.
						As well as a wide variety of characters with different species. We will start by showing the
						link between species, planets and characters.

						In the radial tidy tree below, we have represented the link between the species, the planets
						on which these species come and the characters.
					</h3>

					<h3>
						It is very obvious to see that the majority species is the human, present on many planets
						favorable to their development.
						For the rest, a species is rather connected to a planet.
					</h3>
				</div>
			</div>

			<div class="center child">
				<div id="radialTidy"></div>
			</div>

			<div id="title" class="child">
				<div>
					<h3>
						We will now represent the variety of planets in the galaxy on the following bubble chat.
						Each type of climate is represented by different colors. The majority in light blue represents
						a temperate climate. The dark blue represents a cold climate while in red-orange the climate
						is hot and arid. The other colors are used for different climates, or for planets with
						several climates.
						The majority of temperate climate confirms the previous radial tidy tree: humans are present
						on many planets, and they need a temperate climate to survive.
					</h3>
					<h3>
						The number below the name of the planet is its diameter in miles.
					</h3>

				</div>
			</div>

			<div class="center child">
				<div id="bubbleChart" class="center"></div>
			</div>
			<div class="center child">
				<div id="barChart" class="center"></div>
			</div>
			<div class="center child block-height">
				<div class="flex-parent jc-center">
					<button type="button" class="margin-right">Click Me!</button>
					<button type="button" class="margin-right">Click Me!</button>
					<button type="button">Click Me!</button>
				</div>

				<div id="wordCloud" class="center"></div>
			</div>
		</div>
	</main>
</body>

<script type="module">

	import define from "./radial_tidy.js";
	import { Runtime, Library, Inspector } from "./runtime.js";

	const runtime = new Runtime();
	const main = runtime.module(define, name => {
		if (name == 'chart') {
			return new Inspector(document.getElementById("radialTidy"))
		}
	});


</script>

<script type="module">

	import define from "./bubble_chart.js";
	import { Runtime, Library, Inspector } from "./runtime.js";

	const runtime3 = new Runtime();

	const main3 = runtime3.module(define, name => {
		if (name == 'chart') {
			return new Inspector(document.getElementById("bubbleChart"))
		}
	});


</script>

<script type="module">

	import define from "./barChartRace.js";
	import { Runtime, Library, Inspector } from "./runtime.js";

	const runtime2 = new Runtime();
	const main2 = runtime2.module(define, name => {
		if (name == 'chart') {
			return new Inspector(document.getElementById("barChart"))
		}
	});

</script>

<script type="module">

	import define from "./wordCloud.js";
	import { Runtime, Library, Inspector } from "./runtime.js";

	const runtime4 = new Runtime();
	const main4 = runtime4.module(define, name => {
		if (name == 'chart') {
			return new Inspector(document.getElementById("wordCloud"))
		}

	});

</script>

<script>
	const canvas = document.getElementById("canvas");
	const c = canvas.getContext("2d");

	let w;
	let h;

	const setCanvasExtents = () => {
		w = document.body.clientWidth;
		h = document.body.clientHeight;
		canvas.width = Math.min(1600, w);
		canvas.height = Math.min(900, h);
	};

	setCanvasExtents();

	const crawl = document.getElementById("crawl");
	const crawlContent = document.getElementById("crawl-content");
	const crawlContentStyle = crawlContent.style;

	// start crawl at bottom of 3d plane
	let crawlPos = crawl.clientHeight;

	const makeStars = count => {
		const out = [];
		for (let i = 0; i < count; i++) {
			const s = {
				x: Math.random() * 1600 - 800,
				y: Math.random() * 900 - 450,
				z: Math.random() * 1000
			};
			out.push(s);
		}
		return out;
	};

	let stars = makeStars(2000);

	window.onresize = () => {
		setCanvasExtents();
	};

	const clear = () => {
		c.fillStyle = "black";
		c.fillRect(0, 0, canvas.width, canvas.height);
	};

	const putPixel = (x, y, brightness) => {
		const intensity = brightness * 255;
		const rgb = "rgb(" + intensity + "," + intensity + "," + intensity + ")";
		c.fillStyle = rgb;
		c.fillRect(x, y, 1, 1);
	};

	const moveStars = distance => {
		const count = stars.length;
		for (var i = 0; i < count; i++) {
			const s = stars[i];
			s.z -= distance;
			if (s.z <= 1) {
				s.z += 999;
			}
		}
	};

	const moveCrawl = distance => {
		crawlPos -= distance;
		crawlContentStyle.top = crawlPos + "px";

		// if we've scrolled all content past the top edge
		// of the plane, reposition content at bottom of plane
		if (crawlPos < -crawlContent.clientHeight) {
			crawlPos = crawl.clientHeight;
		}
	};

	const paintStars = () => {
		const cx = canvas.width / 2;
		const cy = canvas.height / 2;

		const count = stars.length;
		for (var i = 0; i < count; i++) {
			const star = stars[i];

			const x = cx + star.x / (star.z * 0.001);
			const y = cy + star.y / (star.z * 0.001);

			if (x < 0 || x >= w || y < 0 || y >= h) {
				continue;
			}

			const d = star.z / 1000.0;
			const b = 1 - d * d;

			putPixel(x, y, b);
		}
	};

	let prevTime;
	const init = time => {
		prevTime = time;
		requestAnimationFrame(tick);
	};

	const tick = time => {
		let elapsed = time - prevTime;
		prevTime = time;

		moveStars(elapsed * 0.02);

		// time-scale of crawl, increase factor to go faster
		moveCrawl(elapsed * 0.1);

		clear();
		paintStars();

		requestAnimationFrame(tick);
	};

	requestAnimationFrame(init);
</script>

</html>